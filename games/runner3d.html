<!DOCTYPE html>
<html lang="tr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Runner 3D</title>
<style>
  body{margin:0;background:#0b1020;color:#fff;font-family:system-ui;overflow:hidden}
  #ui{position:fixed;top:10px;left:10px;background:#0009;padding:8px 12px;border-radius:10px}
  #jump{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);padding:14px 18px;border-radius:999px;border:none;background:#fff;color:#111;font-weight:700}
  canvas{display:block}
</style></head>
<body>
<div id="ui">Skor: <span id="sc">0</span></div>
<button id="jump">Zıpla (Space)</button>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<script>
let scene=new THREE.Scene();
let camera=new THREE.PerspectiveCamera(70, innerWidth/innerHeight, 0.1, 1000);
let renderer=new THREE.WebGLRenderer({antialias:true}); renderer.setSize(innerWidth,innerHeight); document.body.appendChild(renderer.domElement);
camera.position.set(0,2.5,6);
const light=new THREE.DirectionalLight(0xffffff,1); light.position.set(3,5,2); scene.add(light);
scene.add(new THREE.AmbientLight(0xffffff,0.4));
// zemin
const plane=new THREE.Mesh(new THREE.PlaneGeometry(20,1000), new THREE.MeshStandardMaterial({color:0x222222}));
plane.rotation.x=-Math.PI/2; plane.position.z=-450; scene.add(plane);
// oyuncu
const player=new THREE.Mesh(new THREE.BoxGeometry(1,1,1), new THREE.MeshStandardMaterial({color:0x44ff88}));
player.position.set(0,0.5,0); scene.add(player);
let vy=0, onGround=true, score=0;
// engeller
let obstacles=[];
function spawn(){
  const o=new THREE.Mesh(new THREE.BoxGeometry(1,Math.random()*1+1,1), new THREE.MeshStandardMaterial({color:0xff4466}));
  o.position.set( (Math.random()>.5?0.8:-0.8), o.geometry.parameters.height/2, -40);
  scene.add(o); obstacles.push(o);
}
let t=0;
function jump(){ if(onGround){ vy=0.18; onGround=false; } }
window.addEventListener('keydown',e=>{ if(e.key===' ') jump(); });
document.getElementById('jump').addEventListener('click', jump);
function loop(){
  requestAnimationFrame(loop);
  t+=1;
  // zıplama fiziği
  vy -= 0.008; player.position.y += vy;
  if(player.position.y<=0.5){ player.position.y=0.5; vy=0; onGround=true; }
  // engeller hareket
  if(t%80===0) spawn();
  obstacles.forEach((o,i)=>{ o.position.z += 0.6; if(o.position.z>5){ scene.remove(o); obstacles.splice(i,1); } });
  // çarpışma
  obstacles.forEach(o=>{
    if(Math.abs(o.position.z - player.position.z) < 0.7 &&
       Math.abs(o.position.x - player.position.x) < 0.9 &&
       player.position.y < o.geometry.parameters.height){
        gameOver();
    }
  });
  // skor
  if(t%30===0){ score++; document.getElementById('sc').textContent=score; }
  renderer.render(scene,camera);
}
function gameOver(){
  const div=document.createElement('div');
  div.style.position='fixed'; div.style.top='50%'; div.style.left='50%'; div.style.transform='translate(-50%,-50%)';
  div.style.background='rgba(0,0,0,.7)'; div.style.color='#fff'; div.style.padding='16px 20px'; div.style.borderRadius='10px'; div.style.textAlign='center';
  div.innerHTML='<h2>Oyun Bitti!</h2><p>Skor: '+score+'</p><button id="rst" style="padding:10px 14px;border:none;border-radius:10px;background:#fff;color:#111;font-weight:700">Yeniden Başlat</button>';
  document.body.appendChild(div);
  const restart=()=>{ location.reload(); };
  document.getElementById('rst').addEventListener('click', restart);
  window.removeEventListener('keydown', keyHandler);
  cancelAnimationFrame(loop);
}
function keyHandler(e){ if(e.key===' ') jump(); }
window.addEventListener('resize',()=>{ camera.aspect=innerWidth/innerHeight; camera.updateProjectionMatrix(); renderer.setSize(innerWidth,innerHeight); });
loop();
</script>
</body></html>
