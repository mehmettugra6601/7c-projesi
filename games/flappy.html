<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Flappy Kare</title>
  <style>
    body { margin:0; display:flex; justify-content:center; align-items:center; background:#111; }
    canvas { background:#87ceeb; }
  </style>
</head>
<body>
  <canvas id="game" width="400" height="500"></canvas>
  <script>
    const canvas=document.getElementById("game");
    const ctx=canvas.getContext("2d");

    let x=50,y=200,gravity=0.6,velocity=0,jump=-10;
    let pipes=[],frame=0,score=0;

    function drawPlayer(){
      ctx.fillStyle="yellow";
      ctx.fillRect(x,y,20,20);
    }

    function drawPipes(){
      ctx.fillStyle="green";
      pipes.forEach(p=>{
        ctx.fillRect(p.x,0,40,p.top);
        ctx.fillRect(p.x,p.top+120,40,canvas.height);
      });
    }

    function update(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      velocity+=gravity;
      y+=velocity;

      if(frame%90===0){
        let top=Math.random()*200+50;
        pipes.push({x:canvas.width,top:top});
      }
      pipes.forEach(p=>p.x-=2);

      drawPlayer();
      drawPipes();

      pipes.forEach(p=>{
        if(x< p.x+40 && x+20>p.x && (y< p.top || y+20>p.top+120)){
          alert("Oyun Bitti! Skor: "+score);
          document.location.reload();
        }
        if(p.x+40===x) score++;
      });

      ctx.fillStyle="white";
      ctx.fillText("Skor: "+score,10,20);

      frame++;
      requestAnimationFrame(update);
    }

    document.addEventListener("keydown",()=>{ velocity=jump; });
    document.addEventListener("click",()=>{ velocity=jump; });

    update();
  </script>
</body>
</html>
